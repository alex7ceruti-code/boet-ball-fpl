# Adding New Sources to BoetBall Content Radar

## üéØ Quick Overview

Adding new sources involves:
1. **Write a new function** to fetch data from the source
2. **Add SA cultural context** for that source type  
3. **Call the function** in the main update routine
4. **Configure any needed API keys** or settings

---

## üìä Ready-to-Add Source Examples

### 1. Fantasy Football Scout (RSS Feed)

```javascript
/**
 * Monitor Fantasy Football Scout RSS feed for articles
 */
function updateFantasyFootballScoutData(sheet) {
  console.log('üì∞ Updating Fantasy Football Scout data...');
  
  try {
    const rssUrl = 'https://www.fantasyfootballscout.co.uk/feed/';
    const response = UrlFetchApp.fetch(rssUrl);
    const xmlText = response.getContentText();
    
    // Parse RSS XML (basic parsing)
    const items = extractRSSItems(xmlText);
    
    items.slice(0, 3).forEach(item => { // Top 3 articles only
      if (isFPLRelevantTitle(item.title)) {
        const saAngle = getRandomElement([
          'Expert analysis perfect for SAST morning coffee reading',
          'Professional insights to impress your local mini-league',
          'Scout wisdom - like having a spotter for the perfect braai meat',
          'Detailed analysis deeper than Johannesburg mine shafts'
        ]);
        
        const actionItem = `"Scout Report" - SA perspective on ${extractKeyTopic(item.title)}`;
        
        appendToSheet(sheet, {
          date: new Date(item.pubDate),
          source: 'Fantasy Football Scout',
          type: 'Expert Analysis',
          topic: truncateText(item.title, 60),
          summary: truncateText(item.description, 120),
          players: extractPlayerMentions(item.title + ' ' + item.description),
          relevance: 'Professional FPL analysis - High credibility source',
          saAngle: saAngle,
          action: actionItem,
          autoGenerated: 'Yes'
        });
      }
    });
    
    console.log(`‚úÖ Fantasy Football Scout updated`);
    
  } catch (error) {
    console.error('‚ùå Error updating Fantasy Football Scout:', error);
  }
}

// Helper function to parse RSS XML
function extractRSSItems(xmlText) {
  const items = [];
  const itemMatches = xmlText.match(/<item>[\s\S]*?<\/item>/g) || [];
  
  itemMatches.slice(0, 5).forEach(itemXml => {
    const title = (itemXml.match(/<title><!\[CDATA\[(.*?)\]\]><\/title>/) || [])[1] || 'No title';
    const description = (itemXml.match(/<description><!\[CDATA\[(.*?)\]\]><\/description>/) || [])[1] || 'No description';
    const pubDate = (itemXml.match(/<pubDate>(.*?)<\/pubDate>/) || [])[1] || new Date().toISOString();
    
    items.push({ title, description, pubDate });
  });
  
  return items;
}
```

### 2. FPL Statistics (Price Predictor)

```javascript
/**
 * Monitor FPLStatistics for price predictions
 */
function updateFPLStatisticsData(sheet) {
  console.log('üìà Updating FPL Statistics data...');
  
  try {
    // Note: This would require web scraping or finding their API
    const statsUrl = 'https://www.fplstatistics.co.uk/Home/AjaxPricePredictions';
    
    const response = UrlFetchApp.fetch(statsUrl, {
      headers: {
        'User-Agent': 'BoetBall-Content-Radar/1.0',
        'Accept': 'application/json'
      }
    });
    
    const data = JSON.parse(response.getContentText());
    
    // Look for players close to price changes
    const risers = data.filter(player => player.target > 90);
    const fallers = data.filter(player => player.target < -90);
    
    [...risers.slice(0, 2), ...fallers.slice(0, 2)].forEach(player => {
      const changeType = player.target > 0 ? 'rise' : 'fall';
      const saAngle = `Price ${changeType} prediction - like checking weather before a braai, essential planning`;
      const actionItem = `"Price Alert" - ${player.name} ${changeType} warning with SA timing tips`;
      
      appendToSheet(sheet, {
        date: new Date(),
        source: 'FPL Statistics',
        type: 'Price Prediction',
        topic: `${player.name} likely to ${changeType} soon`,
        summary: `${player.name} at ${player.target}% towards price ${changeType} - act before deadline`,
        players: player.name,
        relevance: `Price predictor shows ${changeType} imminent - Transfer planning crucial`,
        saAngle: saAngle,
        action: actionItem,
        autoGenerated: 'Yes'
      });
    });
    
    console.log(`‚úÖ FPL Statistics updated`);
    
  } catch (error) {
    console.error('‚ùå Error updating FPL Statistics:', error);
  }
}
```

### 3. Twitter/X FPL Community

```javascript
/**
 * Monitor Twitter for FPL pundit tweets
 * Requires Twitter API v2 Bearer Token
 */
function updateTwitterFPLData(sheet) {
  console.log('üê¶ Updating Twitter FPL data...');
  
  try {
    // You'll need to add your Twitter Bearer Token to script properties
    const bearerToken = PropertiesService.getScriptProperties().getProperty('TWITTER_BEARER_TOKEN');
    
    if (!bearerToken) {
      console.log('‚ö†Ô∏è Twitter Bearer Token not found - skipping Twitter updates');
      return;
    }
    
    const fplPundits = ['@BenCrellin', '@FPLFocal', '@FPLtips', '@LetsTalk_FPL'];
    const searchQuery = `from:${fplPundits.join(' OR from:')} -is:retweet`;
    
    const twitterUrl = `https://api.twitter.com/2/tweets/search/recent?query=${encodeURIComponent(searchQuery)}&max_results=10&tweet.fields=created_at,public_metrics`;
    
    const response = UrlFetchApp.fetch(twitterUrl, {
      headers: {
        'Authorization': `Bearer ${bearerToken}`,
        'User-Agent': 'BoetBall-Content-Radar/1.0'
      }
    });
    
    const data = JSON.parse(response.getContentText());
    
    if (data.data) {
      data.data.slice(0, 5).forEach(tweet => {
        if (isFPLRelevant(tweet.text)) {
          const saAngle = getRandomElement([
            'FPL pundit wisdom - like getting tips from the braai master',
            'Expert insight during SA afternoon - perfect tea-time reading',
            'Professional FPL advice worth more than Springbok tickets',
            'Pundit prediction - sharper than a boerewors knife'
          ]);
          
          const actionItem = generateTwitterActionItem(tweet.text);
          
          appendToSheet(sheet, {
            date: new Date(tweet.created_at),
            source: 'Twitter FPL Pundits',
            type: 'Expert Opinion',
            topic: truncateText(tweet.text, 60),
            summary: truncateText(tweet.text, 120),
            players: extractPlayerMentions(tweet.text),
            relevance: `High engagement (${tweet.public_metrics.retweet_count + tweet.public_metrics.like_count} interactions) - Expert insight`,
            saAngle: saAngle,
            action: actionItem,
            autoGenerated: 'Yes'
          });
        }
      });
    }
    
    console.log(`‚úÖ Twitter FPL data updated`);
    
  } catch (error) {
    console.error('‚ùå Error updating Twitter data:', error);
  }
}

function generateTwitterActionItem(tweetText) {
  const text = tweetText.toLowerCase();
  
  if (text.includes('captain')) return '"Pundit\'s Pick" - Expert captaincy with SA perspective';
  if (text.includes('transfer')) return '"Expert Transfer" - Pundit advice with local timing';
  if (text.includes('avoid') || text.includes('warning')) return '"Red Flag Alert" - Expert warning with SA context';
  
  return 'Expert insight analysis with South African perspective';
}
```

### 4. YouTube FPL Content (via RSS)

```javascript
/**
 * Monitor popular FPL YouTube channels
 */
function updateYouTubeFPLData(sheet) {
  console.log('üì∫ Updating YouTube FPL data...');
  
  try {
    // Popular FPL YouTube channel RSS feeds
    const channels = [
      'https://www.youtube.com/feeds/videos.xml?channel_id=UCZ9WWQJ4FYXOBOBFgcgp-FQ', // FPL Focal
      'https://www.youtube.com/feeds/videos.xml?channel_id=UC12V9BgAyxlcFUbCNLKvn6Q'  // Let's Talk FPL
    ];
    
    for (const rssUrl of channels) {
      try {
        const response = UrlFetchApp.fetch(rssUrl);
        const xmlText = response.getContentText();
        const videos = extractYouTubeVideos(xmlText);
        
        videos.slice(0, 2).forEach(video => { // Latest 2 videos per channel
          if (isFPLRelevantTitle(video.title)) {
            const saAngle = getRandomElement([
              'Video content perfect for weekend braai background viewing',
              'YouTube wisdom - like having FPL coaching during load shedding prep',
              'Video analysis deeper than Kruger Park game drives',
              'Content timing perfect for Saturday morning coffee and rusks'
            ]);
            
            const actionItem = `"Video Insights" - Key points from ${video.title} with SA context`;
            
            appendToSheet(sheet, {
              date: new Date(video.published),
              source: `YouTube - ${video.channelName}`,
              type: 'Video Content',
              topic: truncateText(video.title, 60),
              summary: `Video analysis covering ${extractKeyTopic(video.title)} - ${video.duration}`,
              players: extractPlayerMentions(video.title),
              relevance: 'Video content - Visual FPL analysis and strategy',
              saAngle: saAngle,
              action: actionItem,
              autoGenerated: 'Yes'
            });
          }
        });
        
        Utilities.sleep(1000); // Rate limiting between channels
        
      } catch (channelError) {
        console.error(`Error processing channel ${rssUrl}:`, channelError);
      }
    }
    
    console.log(`‚úÖ YouTube FPL data updated`);
    
  } catch (error) {
    console.error('‚ùå Error updating YouTube data:', error);
  }
}

function extractYouTubeVideos(xmlText) {
  const videos = [];
  const entryMatches = xmlText.match(/<entry>[\s\S]*?<\/entry>/g) || [];
  
  entryMatches.slice(0, 3).forEach(entryXml => {
    const title = (entryXml.match(/<title>(.*?)<\/title>/) || [])[1] || 'No title';
    const published = (entryXml.match(/<published>(.*?)<\/published>/) || [])[1] || new Date().toISOString();
    const channelName = (entryXml.match(/<name>(.*?)<\/name>/) || [])[1] || 'Unknown Channel';
    
    videos.push({ title, published, channelName, duration: 'Video' });
  });
  
  return videos;
}
```

---

## üîß How to Add These Sources

### Step 1: Choose Your Source
Pick one of the examples above or adapt for your preferred source.

### Step 2: Add the Function
Copy the entire function into your Apps Script file (after the existing functions).

### Step 3: Update Main Function
Add your new function to `runWeeklyContentRadarUpdate`:

```javascript
function runWeeklyContentRadarUpdate() {
  console.log('üöÄ Starting BoetBall Content Radar weekly update...');
  
  try {
    const sheet = getOrCreateSheet();
    cleanupOldEntries(sheet);
    
    // Existing functions
    updateFPLOfficialData(sheet);
    Utilities.sleep(CONFIG.UPDATE_INTERVAL_MS);
    
    updateRedditFPLData(sheet);
    Utilities.sleep(CONFIG.UPDATE_INTERVAL_MS);
    
    monitorPriceChanges(sheet);
    Utilities.sleep(CONFIG.UPDATE_INTERVAL_MS);
    
    // ADD YOUR NEW FUNCTIONS HERE
    updateFantasyFootballScoutData(sheet);
    Utilities.sleep(CONFIG.UPDATE_INTERVAL_MS);
    
    updateYouTubeFPLData(sheet);
    Utilities.sleep(CONFIG.UPDATE_INTERVAL_MS);
    
    // Optional: Twitter (requires API key)
    // updateTwitterFPLData(sheet);
    // Utilities.sleep(CONFIG.UPDATE_INTERVAL_MS);
    
    sheet.getRange('N1').setValue('Last Update: ' + new Date().toLocaleString('en-ZA', {timeZone: 'Africa/Johannesburg'}));
    
    console.log('‚úÖ Weekly BoetBall Content Radar update completed successfully');
    
  } catch (error) {
    console.error('‚ùå Error in weekly update:', error);
  }
}
```

### Step 4: Add Helper Functions
Include any helper functions needed (like `extractRSSItems`, `extractYouTubeVideos`, etc.)

### Step 5: Test Individual Source
Create a test function:

```javascript
function testNewSource() {
  const sheet = getOrCreateSheet();
  updateFantasyFootballScoutData(sheet); // Replace with your function name
  console.log('‚úÖ Test completed');
}
```

---

## üõ†Ô∏è Creating Custom Sources

### Template for Any New Source:

```javascript
function updateYOUR_SOURCE_Data(sheet) {
  console.log('üì° Updating YOUR_SOURCE data...');
  
  try {
    // 1. FETCH DATA
    const response = UrlFetchApp.fetch('YOUR_API_URL');
    const data = JSON.parse(response.getContentText());
    
    // 2. FILTER RELEVANT CONTENT
    const relevantData = data.filter(item => 
      // Your filtering logic here
      isFPLRelevant(item.title)
    );
    
    // 3. PROCESS EACH ITEM
    relevantData.slice(0, 3).forEach(item => {
      
      // 4. ADD SA CONTEXT
      const saAngle = getRandomElement([
        'Your SA cultural reference here',
        'Another SA-flavored angle',
        'Local context that makes sense'
      ]);
      
      // 5. SUGGEST ACTION ITEM
      const actionItem = `"Content Type" - ${item.topic} with SA perspective`;
      
      // 6. ADD TO SHEET
      appendToSheet(sheet, {
        date: new Date(item.date),
        source: 'YOUR SOURCE NAME',
        type: 'Content Type',
        topic: item.title,
        summary: item.description,
        players: extractPlayerMentions(item.content),
        relevance: 'Why this matters for FPL',
        saAngle: saAngle,
        action: actionItem,
        autoGenerated: 'Yes'
      });
    });
    
    console.log(`‚úÖ YOUR_SOURCE updated`);
    
  } catch (error) {
    console.error('‚ùå Error updating YOUR_SOURCE:', error);
  }
}
```

---

## üîë API Keys Setup

For sources requiring API keys (like Twitter):

### Step 1: Get API Key
Sign up for the service's developer program and get your API key.

### Step 2: Store Securely in Apps Script
1. In Apps Script, go to **Project Settings** (‚öôÔ∏è)
2. Scroll to **Script Properties**
3. Add property: `TWITTER_BEARER_TOKEN` = `your_actual_token_here`

### Step 3: Use in Code
```javascript
const bearerToken = PropertiesService.getScriptProperties().getProperty('TWITTER_BEARER_TOKEN');
```

---

## üéØ Best Practices

### ‚úÖ Do:
- **Rate limit**: Add `Utilities.sleep(2000)` between API calls
- **Error handling**: Wrap each source in try/catch  
- **Filter relevance**: Only track FPL-related content
- **Add SA context**: Every entry needs local flavor
- **Test individually**: Create test functions for each source

### ‚ùå Don't:
- **Overload APIs**: Respect rate limits
- **Skip error handling**: One broken source shouldn't break others
- **Forget SA context**: Every entry needs cultural relevance  
- **Track everything**: Filter for quality over quantity

---

## üìà Recommended Priority Order

1. **Fantasy Football Scout RSS** - Easy to implement, high quality
2. **YouTube FPL channels** - Rich content, visual insights
3. **FPL Statistics price data** - Unique predictive insights
4. **Twitter FPL pundits** - Real-time expert opinions (requires API key)
5. **Podcasts RSS feeds** - Weekly deep analysis
6. **Your own custom sources** - Niche insights others don't have

Start with one source, get it working perfectly, then add more gradually. This way you maintain quality while scaling up your content radar system! üöÄ
