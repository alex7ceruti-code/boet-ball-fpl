# BoetBall Content Radar - Google Sheets Automation

## Overview
This guide shows how to set up automated data collection for the BoetBall Content Radar using Google Sheets and Google Apps Script. The system will automatically monitor key FPL sources and update your content tracking sheet weekly.

## Setup Steps

### 1. Create Google Sheet Template

First, create a new Google Sheet with these columns:
- **A**: Date
- **B**: Source  
- **C**: Type of Content
- **D**: Key Topic
- **E**: Summary
- **F**: Player Mentions
- **G**: FPL Relevance
- **H**: SA Angle
- **I**: Action for BoetBall
- **J**: Status (New/In Progress/Published)
- **K**: Engagement Score
- **L**: Auto-Generated (Yes/No)

### 2. Google Sheets Template Link
Create a new sheet and import our CSV data, then use the automation scripts below.

### 3. Key Sources for Automation

#### Free APIs & RSS Feeds:
- **FPL Official API**: `https://fantasy.premierleague.com/api/bootstrap-static/`
- **Reddit r/FantasyPL**: Reddit API (requires key)
- **Fantasy Football Scout**: RSS feed available
- **FPL Blackbox**: Some public endpoints
- **Twitter/X**: Twitter API v2 (limited free tier)

#### Web Scraping Sources (with care):
- Official FPL news page
- BBC Sport Fantasy section  
- Sky Sports FPL content
- Public FPL statistics sites

## Google Apps Script Automation

### Script 1: FPL Official Data Monitor

```javascript
function updateFPLOfficialData() {
  const sheet = SpreadsheetApp.getActiveSheet();
  const fplApiUrl = 'https://fantasy.premierleague.com/api/bootstrap-static/';
  
  try {
    const response = UrlFetchApp.fetch(fplApiUrl);
    const data = JSON.parse(response.getContentText());
    
    // Check for injured players
    const injuredPlayers = data.elements.filter(player => 
      player.news && player.news.length > 0 && player.chance_of_playing_next_round < 100
    );
    
    injuredPlayers.forEach(player => {
      const saAngle = generateSAAngle('injury', player);
      const actionItem = generateActionItem('injury', player);
      
      appendToSheet(sheet, {
        date: new Date(),
        source: 'FPL Official API',
        type: 'Injury Update',
        topic: `${player.web_name} injury concern`,
        summary: `${player.web_name} (${player.news}) - ${player.chance_of_playing_next_round}% chance to play`,
        players: player.web_name,
        relevance: `Ownership: ${player.selected_by_percent}% - Major captaincy implications`,
        saAngle: saAngle,
        action: actionItem,
        autoGenerated: 'Yes'
      });
    });
    
    Logger.log('FPL Official data updated successfully');
  } catch (error) {
    Logger.log('Error updating FPL data: ' + error.toString());
  }
}

function generateSAAngle(type, data) {
  const saAngles = {
    injury: [
      'Weekend kickoff timing perfect for braai debates about captain choices',
      'Injury news breaking during morning coffee - classic FPL stress timing',
      'Like planning a braai and the weather turns - need backup plans!',
      'SAST deadline pressure adds extra spice to these decisions'
    ],
    price: [
      'Price changes at 2:30 AM SAST - check before bed, not morning coffee',
      'Like buying meat at closing time - reduced price but still quality',
      'Petrol price style volatility hitting FPL assets hard',
      'Budget management as crucial as planning monthly groceries'
    ]
  };
  
  const angles = saAngles[type] || saAngles.injury;
  return angles[Math.floor(Math.random() * angles.length)];
}

function generateActionItem(type, data) {
  const actions = {
    injury: `Create "${data.web_name} Watch" article with alternative captain picks`,
    price: `"Midnight Moves" price tracker with SAST timing alerts`,
    transfer: `"Trending Now" transfer analysis with SA perspective`
  };
  
  return actions[type] || 'Analyze and create original content piece';
}
```

### Script 2: Reddit FPL Monitor

```javascript
function updateRedditFPLData() {
  // Note: Requires Reddit API key (free tier available)
  const sheet = SpreadsheetApp.getActiveSheet();
  const redditApiUrl = 'https://www.reddit.com/r/FantasyPL/hot.json?limit=10';
  
  try {
    const response = UrlFetchApp.fetch(redditApiUrl, {
      headers: {
        'User-Agent': 'BoetBall-Content-Radar/1.0'
      }
    });
    
    const data = JSON.parse(response.getContentText());
    
    data.data.children.forEach(post => {
      const postData = post.data;
      
      // Filter for relevant FPL content
      if (isFPLRelevant(postData.title) && postData.score > 50) {
        const saAngle = generateRedditSAAngle(postData);
        const actionItem = generateRedditActionItem(postData);
        
        appendToSheet(sheet, {
          date: new Date(postData.created_utc * 1000),
          source: 'r/FantasyPL Reddit',
          type: 'Community Discussion',
          topic: postData.title.substring(0, 50) + '...',
          summary: extractSummary(postData.selftext || postData.title),
          players: extractPlayerMentions(postData.title + ' ' + postData.selftext),
          relevance: `High engagement (${postData.score} upvotes) - Community trend`,
          saAngle: saAngle,
          action: actionItem,
          autoGenerated: 'Yes'
        });
      }
    });
    
    Logger.log('Reddit FPL data updated successfully');
  } catch (error) {
    Logger.log('Error updating Reddit data: ' + error.toString());
  }
}

function isFPLRelevant(title) {
  const keywords = ['transfer', 'captain', 'GW', 'gameweek', 'wildcard', 'chip', 'price', 'fixture'];
  return keywords.some(keyword => title.toLowerCase().includes(keyword));
}

function extractPlayerMentions(text) {
  const commonPlayers = ['Salah', 'Haaland', 'Kane', 'Palmer', 'Saka', 'Son', 'Watkins'];
  const mentions = commonPlayers.filter(player => 
    text.toLowerCase().includes(player.toLowerCase())
  );
  return mentions.join(', ') || 'Various players';
}

function generateRedditSAAngle(postData) {
  const saAngles = [
    'SA FPL community often trails these trends - opportunity to be early adopters',
    'Reddit discussions during SA work hours - perfect lunch break reading',
    'Global community insights with local application potential',
    'International perspective that SA managers can adapt for local leagues'
  ];
  return saAngles[Math.floor(Math.random() * saAngles.length)];
}
```

### Script 3: Price Change Monitor

```javascript
function monitorPriceChanges() {
  const sheet = SpreadsheetApp.getActiveSheet();
  const priceApiUrl = 'https://fantasy.premierleague.com/api/bootstrap-static/';
  
  // Store yesterday's prices (you'd implement proper storage)
  const properties = PropertiesService.getScriptProperties();
  
  try {
    const response = UrlFetchApp.fetch(priceApiUrl);
    const data = JSON.parse(response.getContentText());
    
    // Check for significant price movements
    data.elements.forEach(player => {
      if (Math.abs(parseFloat(player.cost_change_event)) >= 0.1) {
        const changeType = player.cost_change_event > 0 ? 'rise' : 'drop';
        const saAngle = `Price ${changeType} at 2:30 AM SAST - ${changeType === 'rise' ? 'like petrol prices going up overnight' : 'rare good news like finding a parking spot in Cape Town'}`;
        
        appendToSheet(sheet, {
          date: new Date(),
          source: 'FPL Price Tracker',
          type: 'Price Changes',
          topic: `${player.web_name} price ${changeType}`,
          summary: `${player.web_name} ${changeType === 'rise' ? 'increased' : 'dropped'} to Â£${(player.now_cost / 10).toFixed(1)}m`,
          players: player.web_name,
          relevance: `${player.selected_by_percent}% ownership affected - Transfer implications`,
          saAngle: saAngle,
          action: `"${changeType === 'rise' ? 'Rising Star' : 'Bargain Alert'}" analysis with timing guidance`,
          autoGenerated: 'Yes'
        });
      }
    });
    
  } catch (error) {
    Logger.log('Error monitoring price changes: ' + error.toString());
  }
}
```

### Script 4: Master Automation Function

```javascript
function runWeeklyContentRadarUpdate() {
  Logger.log('Starting weekly BoetBall Content Radar update...');
  
  // Clear old auto-generated entries (optional)
  cleanupOldEntries();
  
  // Run all data collection functions
  updateFPLOfficialData();
  Utilities.sleep(2000); // Rate limiting
  
  updateRedditFPLData();
  Utilities.sleep(2000);
  
  monitorPriceChanges();
  Utilities.sleep(2000);
  
  // Add timestamp of last update
  const sheet = SpreadsheetApp.getActiveSheet();
  sheet.getRange('M1').setValue('Last Update: ' + new Date());
  
  Logger.log('Weekly update completed successfully');
}

function cleanupOldEntries() {
  const sheet = SpreadsheetApp.getActiveSheet();
  const data = sheet.getDataRange().getValues();
  
  // Remove auto-generated entries older than 2 weeks
  const twoWeeksAgo = new Date();
  twoWeeksAgo.setDate(twoWeeksAgo.getDate() - 14);
  
  for (let i = data.length - 1; i > 0; i--) {
    const rowDate = new Date(data[i][0]);
    const isAutoGenerated = data[i][11] === 'Yes';
    
    if (isAutoGenerated && rowDate < twoWeeksAgo) {
      sheet.deleteRow(i + 1);
    }
  }
}

function appendToSheet(sheet, entry) {
  sheet.appendRow([
    entry.date,
    entry.source,
    entry.type,
    entry.topic,
    entry.summary,
    entry.players,
    entry.relevance,
    entry.saAngle,
    entry.action,
    'New',
    0, // Engagement score
    entry.autoGenerated
  ]);
}
```

## Setup Instructions

### Step 1: Create the Google Sheet
1. Go to Google Sheets and create new sheet
2. Add the column headers as specified above
3. Import the sample data from our CSV

### Step 2: Set up Apps Script
1. In your sheet, go to Extensions > Apps Script
2. Delete the default code
3. Copy and paste the scripts above
4. Save the project as "BoetBall Content Radar"

### Step 3: Set up Triggers
1. In Apps Script, click Triggers (clock icon)
2. Add trigger for `runWeeklyContentRadarUpdate`
3. Set it to run weekly (e.g., every Monday at 6 AM SAST)

### Step 4: Test the System
1. Run `runWeeklyContentRadarUpdate` manually first
2. Check if data appears in your sheet
3. Adjust SA angles and action items as needed

### Step 5: Customize SA Content
Edit the `generateSAAngle` and `generateActionItem` functions to match your brand voice and add more South African cultural references.

## Advanced Features to Add

### 1. Sentiment Analysis
```javascript
function analyzeSentiment(text) {
  // Use Google Cloud Natural Language API
  // Or simple keyword-based sentiment
  const positiveWords = ['good', 'great', 'excellent', 'rising'];
  const negativeWords = ['bad', 'poor', 'dropping', 'injured'];
  
  // Simple scoring system
  return calculateSentimentScore(text, positiveWords, negativeWords);
}
```

### 2. Player Performance Tracking
```javascript
function trackPlayerPerformance() {
  // Monitor form, fixture difficulty, ownership changes
  // Generate weekly "ones to watch" lists
}
```

### 3. Gameweek Planning Assistant
```javascript
function generateGameweekInsights() {
  // Analyze upcoming fixtures
  // Create transfer suggestions
  // Generate captain recommendations with SA flavor
}
```

## Benefits of This Approach

â **Automated Data Collection**: Runs weekly without manual intervention
â **South African Context**: Every entry includes local perspective  
â **Ethical Compliance**: Uses only public APIs and data
â **Scalable**: Easy to add new sources and customize
â **Google Integration**: Works seamlessly with other Google Workspace tools
â **Content Planning**: Direct pipeline from data to content creation

## Next Steps

1. Set up the basic system with FPL Official API
2. Test weekly automation
3. Add Reddit integration (requires API key)
4. Expand to other sources gradually
5. Refine SA cultural angles based on community feedback
6. Create content calendar integration

This system will give you a steady stream of FPL insights with authentic South African flavor, all automatically updated in a familiar Google Sheets interface!
